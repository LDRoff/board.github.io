// --- START OF FILE index.html ---
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Интерактивная доска</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="logo-container">
        <div id="logo"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" /></svg></div>
        <div class="settings-menu" id="settingsMenu">
            <input type="file" id="imageUpload" accept="image/*" hidden>
            <a href="#" id="exportPngBtn">Экспорт в PNG</a>
            <a href="#" id="settingsBtn">Настройки</a>
            <a href="#" id="clearCanvas">Очистить доску</a>
        </div>
    </div>

    <canvas id="backgroundCanvas"></canvas>
    <canvas id="drawingBoard"></canvas>

    <div class="zoom-controls" id="zoomControls">
        <button id="zoomInBtn" title="Приблизить (+)"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" /></svg></button>
        <button id="zoomOutBtn" title="Отдалить (-)"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M5 12h14" /></svg></button>
    </div>

    <div class="toolbar-wrapper" id="toolbarWrapper">
        <button class="toggle-toolbar" id="toggleToolbar" title="Свернуть/развернуть панель">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5" />
            </svg>
        </button>
        <div class="toolbar-content-slider">
            <div class="sub-toolbar hidden" id="subToolbar">
                <div class="color-palette" id="colorPalette">
                    <div class="color-dot active" style="background-color: #000000;" data-color="#000000"></div>
                    <div class="color-dot" style="background-color: #FFFFFF;" data-color="#FFFFFF"></div>
                    <div class="color-dot" style="background-color: #EF4444;" data-color="#EF4444"></div>
                    <div class="color-dot" style="background-color: #F97316;" data-color="#F97316"></div>
                    <div class="color-dot" style="background-color: #EAB308;" data-color="#EAB308"></div>
                    <div class="color-dot" style="background-color: #22C55E;" data-color="#22C55E"></div>
                    <div class="color-dot" style="background-color: #3B82F6;" data-color="#3B82F6"></div>
                    <div class="color-dot" style="background-color: #8B5CF6;" data-color="#8B5CF6"></div>
                </div>
                <div class="size-editor">
                    <input type="range" id="lineWidthSlider" min="1" max="50" value="1">
                </div>
            </div>
            <div class="toolbar-container">
                <div class="toolbar-drag-handle"></div>
                <div class="toolbar" id="toolbar">
                    <button id="undoBtn" title="Отменить (Ctrl+Z)"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3" /></svg></button>
                    <button id="redoBtn" title="Повторить (Ctrl+Y)"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m15 15 6-6m0 0-6-6m6 6H9a6 6 0 0 0 0 12h3" /></svg></button>
                    <div class="toolbar-separator"></div>
                    <button data-tool="select" title="Выделить (V)"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="m4 4 7.07 17 2.51-7.39L21 11.07z"/></svg></button>
                    <button data-tool="brush" class="active" title="Кисть (B)"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125" /></svg></button>
                    <!-- НАЧАЛО ИЗМЕНЕНИЙ: Заменяем иконку "Умной кисти" -->
                    <button data-tool="smart-brush" title="Умная кисть">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15.22 5.22a.75.75 0 011.06 0l2.5 2.5a.75.75 0 010 1.06l-10.5 10.5a.75.75 0 01-1.06 0l-2.5-2.5a.75.75 0 010-1.06l10.5-10.5z" />
                            <path stroke-linecap="round" stroke-linejoin="round" d="M14.16 6.16L17.84 9.84" />
                            <path stroke-linecap="round" stroke-linejoin="round" d="M5 3v4M3 5h4" />
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19 15v4M17 17h4" />
                        </svg>
                    </button>
                    <!-- КОНЕЦ ИЗМЕНЕНИЙ -->
                    <button data-tool="eraser" title="Ластик (E)" id="eraserBtn"><svg fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21 13.5A4.5 4.5 0 0116.5 18H7.5A4.5 4.5 0 013 13.5V10.5A4.5 4.5 0 017.5 6h9A4.5 4.5 0 0121 10.5v3z" stroke-linecap="round" stroke-linejoin="round"></path><path d="M16.5 18V6" stroke-linecap="round" stroke-linejoin="round"></path></svg></button>
                    <div class="tool-container" id="shapes-2d-tool-container">
                        <button id="shapes2DBtn" data-tool-group="shapes" title="2D Фигуры"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v16.5h16.5V3.75H3.75z" /></svg></button>
                        <div class="tool-options" id="shapes2DOptions">
                            <a href="#" data-tool="rect" title="Прямоугольник (R)"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v16.5h16.5V3.75H3.75z" /></svg><span>Прямоугольник</span></a>
                            <a href="#" data-tool="ellipse" title="Эллипс (O)"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" /></svg><span>Эллипс</span></a>
                            <a href="#" data-tool="line" title="Линия"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75 20.25 20.25" /></svg><span>Линия</span></a>
                            <a href="#" data-tool="parallelogram" title="Параллелограмм"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m4 20 4-16h12l-4 16H4z" /></svg><span>Параллелограмм</span></a>
                            <a href="#" data-tool="triangle" title="Треугольник"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 2 L2 22 H22 Z" /></svg><span>Треугольник</span></a>
                            <a href="#" data-tool="trapezoid" title="Трапеция"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 20h18L16 4H8L3 20z" /></svg><span>Трапеция</span></a>
                             <a href="#" data-tool="rhombus" title="Ромб"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 2L22 12 12 22 2 12 12 2Z" /></svg><span>Ромб</span></a>
                        </div>
                    </div>
                    <div class="tool-container" id="shapes-3d-tool-container">
                        <button id="shapes3DBtn" data-tool-group="shapes" title="3D Фигуры"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 7.5l-9-5.25L3 7.5m18 0l-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9" /></svg></button>
                        <div class="tool-options" id="shapes3DOptions">
                            <a href="#" data-tool="sphere" title="Сфера"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0z" /><path stroke-linecap="round" stroke-linejoin="round" d="M3.5 12a8.5 8.5 0 0 1 17 0" /></svg><span>Сфера</span></a>
                            <a href="#" data-tool="cone" title="Конус"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 2 L4 21 H20 Z" /><path stroke-linecap="round" stroke-linejoin="round" d="M4 21a8 2 0 0 0 16 0" /></svg><span>Конус</span></a>
                            <a href="#" data-tool="parallelepiped" title="Параллелепипед"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 7.5l-9-5.25L3 7.5m18 0l-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9" /></svg><span>Параллелепипед</span></a>
                            <a href="#" data-tool="pyramid" title="Пирамида">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 2.25L4.5 21h15L12 2.25z" />
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 2.25v18.75" />
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 21l7.5-6 7.5 6" />
                                </svg>
                                <span>Пирамида</span>
                            </a>
                            <a href="#" data-tool="frustum" title="Усеченный конус"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M4 21 L8 4 H16 L20 21 Z" /><path stroke-linecap="round" stroke-linejoin="round" d="M8 4 a4 1.5 0 0 0 8 0" /><path stroke-linecap="round" stroke-linejoin="round" d="M4 21 a8 2 0 0 0 16 0" /></svg><span>Усеченный конус</span></a>
                            <a href="#" data-tool="truncated-pyramid" title="Усеченная пирамида"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M4 20 l3-14 h10 l3 14 H4z M6.5 10 h11" /></svg><span>Усеченная пирамида</span></a>
                            <a href="#" data-tool="truncated-sphere" title="Усеченная сфера">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M20.25 12.75C20.25 17.1391 16.5391 20.625 12 20.625C7.46094 20.625 3.75 17.1391 3.75 12.75" />
                                    <ellipse cx="12" cy="12.75" rx="8.25" ry="3.75"/>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="2 2" d="M12 3v9.75" />
                                </svg>
                                <span>Усеченная сфера</span>
                            </a>
                        </div>
                    </div>
                    <button id="addImageBtn" title="Добавить изображение"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 15.75l5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z" /></svg></button>
                </div>
            </div>
        </div>
    </div>
    
    <div id="settingsModal" class="modal-overlay hidden">
        <div class="modal-photoshop">
            <div class="modal-sidebar">
                <button class="sidebar-button active" data-panel="interface-panel">Интерфейс</button>
            </div>
            <div class="modal-main">
                <div class="modal-panel active" id="interface-panel">
                    <h3>Интерфейс</h3>
                    <div class="setting-row">
                        <label for="theme-select">Цветовая тема:</label>
                        <select id="theme-select" class="ps-select">
                            <option value="light">Светлая</option>
                            <option value="dark">Темная</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="background-style-select">Стиль фона:</label>
                        <select id="background-style-select" class="ps-select">
                            <option value="dot">В точку</option>
                            <option value="grid">В клетку</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="smoothing-slider">Сглаживание линий: <span id="smoothing-value">2</span></label>
                        <input type="range" id="smoothing-slider" min="0" max="10" value="2">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancelSettings" class="ps-button">Отмена</button>
                <button id="okSettings" class="ps-button primary">OK</button>
            </div>
        </div>
    </div>
    
    <div id="lineWidthIndicator"></div>

    <div id="contextMenu" class="context-menu">
        <div class="context-menu-item" data-action="bringForward">Переместить вперед</div>
        <div class="context-menu-item" data-action="sendBackward">Переместить назад</div>
        <div class="context-menu-separator"></div>
        <div class="context-menu-item" data-action="bringToFront">На передний план</div>
        <div class="context-menu-item" data-action="sendToBack">На задний план</div>
    </div>
    
    <script type="module" src="js/main.js"></script>
</body>
</html>
// --- END OF FILE index.html ---